(function(r){typeof define=="function"&&define.amd?define(r):r()})(function(){"use strict";(function(){function r(t){const n=t.split("?")[1]||"";return Object.fromEntries(new URLSearchParams(n))}const s=document.currentScript,o=r((s==null?void 0:s.src)||""),u=o.projectId,l=o.ty,a=o.payload,w="https://shipwait.vercel.app";if(!u){console.warn("[Shipwait] Missing projectId in script src query params.");return}document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector("input[data-shipwait]");if(!t){console.warn("[Shipwait] No input with [data-shipwait] attribute found.");return}const n=t.closest("form");if(!n){console.warn("[Shipwait] The input with [data-shipwait] is not inside a <form>.");return}const c=document.querySelector("p[data-shipwait-message], div[data-shipwait-message]");function d(i){c?(c.textContent=i,c.style.display="block"):alert(i)}n.addEventListener("submit",async i=>{i.preventDefault();const f=t.value.trim();if(!f){d("Please enter your email.");return}try{const e=await fetch(`${w}/api/leads`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:f,projectId:u})});if(!e.ok){let p;try{p=await e.json()}catch{p={message:await e.text()}}const h=p.message+"."||"Server error";throw new Error(h)}const m=await e.text();if(console.log("[Shipwait] Lead added:",m),l==="redirect"&&a){window.location.href=a;return}l==="message"&&a&&d(a),t.value=""}catch(e){console.error("[Shipwait] Submission error:",e),d(e.message||"Server error")}})})})()});
